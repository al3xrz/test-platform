FROM node:18

# устанавливаем рабочую папку внутри образа
WORKDIR /app 

#при отдельном копировании и поледующим RUN эшируются результаты и не 
#перекачиваются npm install если package.json не изменился 
COPY package.json .

#запускается однократно при сборке образа
RUN npm install


# копируем все из корняка в установленную рабочую папку 
COPY . . 


#/app - рабочая папка, data - папка с изменяемым файлом
VOLUME ["/app/data"]

#можно задать переменную, она будет доступна через process.env
ENV PORT 5000

#порт наружу
EXPOSE $PORT


#запускается каждый раз при запуске образа
CMD ["node", "index.js"]
